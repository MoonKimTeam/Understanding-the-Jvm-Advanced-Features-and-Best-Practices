# 가상 머신 성능 모니터링과 문제 해결 도구

## 기본적인 문제 해결 도구

<img width="519" alt="Image" src="https://github.com/user-attachments/assets/3ee8078c-81be-47e2-9e12-7e5b7e59e8c8" />


애플리케이션이 프로덕션 환경에 배포되면 서버에 물리적으로 직접 접근하거나 SSH 등으로 원격 접속하는 데 제약이 있을 수 있다. <br>
이럴 경우라도 개발자는 JDK 도구 라이브러리의 인터페이스와 구현 코드를 이용하여 강력한 모니터링과 분석 기능을 애플리케이션에서 직접 제공할 수 있다.

### jps: 가상 머신 프로세스 상태 도구

동작 중인 가상 머신 프로세스 목록을 보여주며 각 프로세스에서 가상 머신이 실행한 메인 클래스 의 이름과 로컬 가상 머신 식별자(LVMID)를 알려준다. <br>
로컬 가상 머신 프로세스의 LVMID 값은 운영 체제의 프로세스 아이디, 즉 PID와 같다.

### jstat: 가상 머신 통계 정보 모니터링 도구

가상 머신의 다양한 작동 상태 정보를 모니터링하는 데 사용한다. <br>
로컬 또는 원격 가상 머신 프로세스의 클래스 로딩, 메모리, 가비지 컬렉션, JIT 컴파일과 같은 런타임 데이터를 보여 준다. <br>
텍스트 콘솔 환경만 제공하는 서버에서는 런타임에 가상 머신의 성능 문제를 찾는 보편적인 도구일 것이다.

### jinfo: 자바 설정 정보 도구

가상 머신의 다양한 매개 변수를 실시간으로 확인하고 변경하는 도구다. <br>

### jmap: 자바 메모리 매핑 도구

힙 스냅숏을 파일로 덤프해 주는 자바용 메모리 맵 명령어다. <br>
다른 방법으로는 -XX:+HeapDumpOnOutOfMemoryError 매개 변수를 사용하여 메모리가 오퍼블로될때 자동으로 힙을 덤프하는 방법도 있다.

### jhat: 가상 머신 힙 덤프 스냅숏 분석 도구

jmap으로 덤프한 힙 스냅숏을 분석할 수 있다. jdk 9부터 jhsdb가 그 자리를 대신한다. <br>
jhat은 작은 HTTP-웹 서버를 내장하고 있어서 분석이 완료되면 웹 브라우저로 결과를 살펴볼 수 있다.

### jstack: 자바 스택 추적 도구

현재 가상 머신의 스레드 스냅숏을 생성하는 데 쓰인다. <br>
스레드 스냅숏은 현재 가상 머신에서 실행 중인 각 스레드의 메서드 스택들의 집합이다. <br>
주로 스레드가 장시간 멈춰 있을 때 원인을 찾기 위해 생성한다. <br>
주된 원인은 스레드 사이의 교착 상태(deadlock), 무한 루프, 외부 자원 요청으로 인한 긴 기다림 등이다.

## GUI 도구

### JHSDB: 서비스 에이전트 기반 디버깅 도구

JDK는 JCMD와 JHSDB라는 두 가지 다목적 통합 도구를 제공한다. <br>
이 둘은 앞 절에서 소개한 기본 도구들의 기능을 거의 다 제공할 뿐 아니라, 더 강력하다. <br>
JHSDB는 SA를 통해 프로세스 외부에서 디버깅할 수 있는 도구다. SA는 핫스팟 가상 머신이 제공하는 API 집합으로, 자바 가상 머신의 런타임 정보를 제공한다. <ㅠㄱ>
SA의 API를 이용하면 다른 핫스팟의 내부 데이터를 독립된 자바 가상 머신 프로세스에서 분석할 수 있다. <br>
또한 핫스팟이 런타임에 메모리를 어 떻게 활용하는지 스냅숏의 덤프 파일로부터 상세하게 복원할 수 있다.

### JConsole: 자바 모니터링 및 관리 콘솔

JConsole은 JMX에 기반한 GUI 모니터 링 및 관리 도구다. 주로 정보를 수집하고 JMX MBean을 통해 시스템의 매개 변숫값을 동적으로 조정하는데 쓰인다. <br>
JMX는 가상 머신 자체는 물론 가상 머신에서 구동되는 소프트웨어를 관리하는 용도다.

### VisualVM: 다용도 문제 대응 도구

VisualVM은 일반적인 운영 및 문제 대응 기능에 더해 성능 분석까지 제공하는 올인원 자바 문제 해결 도구다. <br>
VisualVM은 모니터링 대상 프로그램에 특별한 에이전트 소프트웨어를 심지 않아도 돼서 활용하기 쉽고 애플리케이션 성능에 미치는 영향도 적다. <br>
그래서 프로덕션 환경에도 곧바로 적용할 수 있다.

### JMC: 지속 가능한 온라인 모니터링 도구

범용 컴퓨팅에 무료로 이용할 수 있는 자바 SE 외에도 오라클은 유료 기술 지원 서비스도 제공한다. <br>
유료 지원 서비스는 주로 기업 고객을 위한 상시 기술 지원과 맞춤형 설치 패키지를 제공하며, 다수의 모니터링, 관리 도구를 추가로 지원한다는 점이 주요 차이점이다.

- AMC: 기업용 JRE 맞춤 관리
- JUT: 시스템에서 JRE 사용 현황 추적
- JFR: 지속적인 데이터 수집
- JMC: 자바 가상 머신 모니터링

## 핫스팟 가상 머신 플러그인과 도구


















